import{_ as w,o as d,c as p,f as g,h as f,H as m,y,A,u as _,a3 as h,w as E,K as u,a4 as L,a5 as x,a6 as P,a7 as b,a8 as C,a9 as R,aa as k,ab as S,ac as V,ad as T,d as D,l as B,ae as O,af as $,ag as H}from"./chunks/framework.493a4ac6.js";import{t as l}from"./chunks/theme.6abe5802.js";const M={},X={class:"loading"};function j(e,t){return d(),p("div",X)}const F=w(M,[["render",j]]);const I={id:"xmind-container"},N={__name:"XmindViewer",props:{url:String},setup(e){const t=g(!0),n=e;return f(async()=>{const{XMindEmbedViewer:a}=await m(()=>import("./chunks/index.223215d0.js"),[]),r=new a({el:"#xmind-container",region:"cn"});r.setStyles({width:"100%",height:"100%"});const c=()=>{t.value=!1,r.removeEventListener("map-ready",c)};r.addEventListener("map-ready",c),fetch(n.url).then(i=>i.arrayBuffer()).then(i=>{r.load(i)}).catch(i=>{t.value=!1,console.log("加载xmind文件出错！"),r.removeEventListener("map-ready",c)})}),(a,r)=>(d(),p("div",I,[t.value?(d(),y(F,{key:0})):A("",!0)]))}};typeof window<"u"&&(window.navigator&&navigator.serviceWorker&&navigator.serviceWorker.getRegistrations().then(function(e){for(let t of e)t.unregister()}),"caches"in window&&caches.keys().then(function(e){return Promise.all(e.map(function(t){return caches.delete(t)}))}));let o;const W={extends:l,Layout:()=>{var n;const e={},{frontmatter:t}=_();return(n=t.value)!=null&&n.layoutClass&&(e.class=t.value.layoutClass),h(l.Layout,e,{})},enhanceApp({app:e,router:t}){e.component("XMind",N),typeof window<"u"&&E(()=>t.route.data.relativePath,()=>G(location.pathname==="/"),{immediate:!0})}};if(typeof window<"u"){const e=navigator.userAgent.toLowerCase();e.includes("chrome")?document.documentElement.classList.add("browser-chrome"):e.includes("firefox")?document.documentElement.classList.add("browser-firefox"):e.includes("safari")&&document.documentElement.classList.add("browser-safari")}function G(e){if(e){if(o)return;o=document.createElement("style"),o.innerHTML=`
    :root {
      animation: rainbow 12s linear infinite;
    }`,document.body.appendChild(o)}else{if(!o)return;o.remove(),o=void 0}}function v(e){if(e.extends){const t=v(e.extends);return{...t,...e,async enhanceApp(n){t.enhanceApp&&await t.enhanceApp(n),e.enhanceApp&&await e.enhanceApp(n)}}}return e}const s=v(W),K=D({name:"VitePressApp",setup(){const{site:e}=_();return f(()=>{B(()=>{document.documentElement.lang=e.value.lang,document.documentElement.dir=e.value.dir})}),O(),$(),H(),s.setup&&s.setup(),()=>h(s.Layout)}});async function U(){const e=z(),t=q();t.provide(x,e);const n=P(e.route);return t.provide(b,n),t.component("Content",C),t.component("ClientOnly",R),Object.defineProperties(t.config.globalProperties,{$frontmatter:{get(){return n.frontmatter.value}},$params:{get(){return n.page.value.params}}}),s.enhanceApp&&await s.enhanceApp({app:t,router:e,siteData:k}),{app:t,router:e,data:n}}function q(){return S(K)}function z(){let e=u,t;return V(n=>{let a=T(n);return e&&(t=a),(e||t===a)&&(a=a.replace(/\.js$/,".lean.js")),u&&(e=!1),m(()=>import(a),[])},s.NotFound)}u&&U().then(({app:e,router:t,data:n})=>{t.go().then(()=>{L(t.route,n.site),e.mount("#app")})});export{U as createApp};
